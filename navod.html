<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Dynamická tabulka - návod</title>
  <meta http-equiv="content-language" content="cs" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="title" content="Dynamická tabulka - návod"/>
  <meta name="description" content="návod na pouziti dynamické tabulky" />
  <link href="css/tutstyle.css" rel="stylesheet" type="text/css" media="all" />
</head>

<body>
  <h1>Návod na použití dynamické tabulky</h1>
  <table>
    <tr><th align="left">autor:</th><td>David Durman</td></tr>
    <tr><th align="left">login:</th><td>xdurma00</td></tr>
    <tr><th align="left">mail:</th><td>xdurma00 (at) stud.fit.vutbr.cz</td></tr>
    <tr><th align="left">datum:</th><td>27.4.2008</td></tr>
  </table>

  <h3>Úvod</h3>
  <p>Dynamická tabulka usnadňuje orientaci v 
  HTML tabulkách. Umožňuje jednotlivé řádky řadit
  podle zadaných kritérií a filtrovat řádky podle 
  libovolného řetězce. 
  Dále také poskytuje stránkování.
  </p>
  
  <h3>Vytvoření dynamické tabulky</h3>
  <p>
  Vytvoření je velice jednoduché, stačí vytvořit objekt
  Dynamické tabulky a předat mu jako parametr atribut id 
  tabulky, nebo objekt tabulky samotný.<br/>
  Př:
    <pre>
    new DynamicTable("table1");
    </pre>
    Nebo přímo v html dokumentu na reakci události 
    přejetí myší přes tabulku:
    <pre>
    &lt;table onmouseover="new DynamicTable(this)"&gt;
    ...
    ...
    &lt;/table&gt;
    </pre>
    Druhý případ je naprosto bezpečný, protože skript si pamatuje všechny 
    vytvořené dynamické tabulky, tj. není třeba se obávat, že se dynamická tabulka
    vytvoří vícekrát po sobě.
  </p>

  <h3>Přizpůsobení dynamické tabulky</h3>
  <p>
  Dynamickou tabulku lze plně přizpůsobit dle svých potřeb.
  V předchozím příkladě vznikla tabulka, která přidala
  před první řádek tabulky resp. hlavičky tabulky
  toolbar s ovládacími prvky pro každý sloupec. 
  Řazení je implicitně chápáno jako řazení dle alfanumerických
  znaků dle lokálního použitého jazyka.
  Objektu DynamicTable lze předat jako druhý parametr
  objekt vlastních voleb.
  
  <h4>Stanovení způsobu řazení pro každý sloupec zvlášť</h4>
  Objektu voleb lze přidat atribut <em>colTypes</em>, který 
  představuje pole, ve kterém lze pro každý sloupec stanovit
  způsob řazení.<br/>
  Př:
    <pre>
    var opt = {
      colTypes: new Array("alpha", "number", "czdate");
    };
    new DynamicTable("table1", opt);
    </pre>
    V tomto případě se první sloupec bude řadit podle
    alfanumerických znaků, druhý podle čísel,
    třetí podle datumu dle českého formátu (dd.mm.rrrr).
    Zbytek případných sloupců bude řazen implicitním způsobem (alpha).
  </p>

  <h4>Definice vlastního způsobu řazení</h4>
  <p>
  Předdefinované způsoby řazení:
  <ul>
    <li><em>alpha</em> - alfanumerické znaky dle aktuálního lokálního nastavení</li>
    <li><em>number</em> - čísla</li>
    <li><em>czdate</em> - datum dle českého formátu (dd.mm.rrrr)</li>
    <li><em>date</em> - datum dle anglického formátu (yyyy-mm-dd)</li>
  </ul>

  Vlastní metody řazení lze předat jako objekt atributu <em>customTypes</em> objektu voleb.<br/>
  Př:
    <pre>
      var opt = {
        colTypes: new Array("number", "lastChar");
	customTypes: {
	  lastChar: function(a, b){
	    return a.charCodeAt(a.length - 1) - b.charCodeAt(b.length - 1);
	  }
	}
      };
      new DynamicTable("table1", opt);      
    </pre>
    Jak je vidět v příkladě, každá takto definovaná metoda přijímá dva parametry
    představující řazené řetězce (hodnoty innerHTML buněk tabulky). Vrací zápornou
    hodnotu, pokud je první parametr menší než druhý, kladný v opačném případě a nulu, 
    pokud se parametry rovnají.
  </p>
  </p>
  
  <h4>Definice vlastního způsobu filtrování</h4>
  <p>
  U dynamické tabulky lze přizpůsobit i funkci pro filtrování. Ta se vytvoří tak, 
  že se objektu voleb přidá atribut <em>filterFunction</em>, který představuje 
  novou funkci pro filtrování, která se použije u všech filtrů. Ta bere jako parametry
  dva řetězce (první je hodnota innerHTML buňky tabulky, druhý je hodnota value tagu input filtru), 
  a vrací -1 při neshodě. Jakákoli jiná hodnota se uvažuje jako shoda. <br/>
  Př:
    <pre>
      var opt = {
        filterFunction: function(a, b){
	  return a.search(b);
	}
      };
    </pre>
    Pro jednoduchost uvádím již pouze objekt voleb. V tomto příkladě se místo
    implicitní funkce filtrování, která není citlivá na velikost písmen použila
    vlastní funkce, která naopak je. 
  </p>

  <h3>Stránkování</h3>
  <p>
  Další službou, kterou poskytuje dynamická tabulka je stránkování. 
  Nastavení je opět velice intuitivní. Stačí objektu voleb přidat atribute <em>pager</em>.
  Ten dále může obsahovat objekt, který popisuje vlastnosti stránkování. Ty jsou pouze dvě.
  Počet řádků na stránku (<em>rowsCount</em>) a počáteční aktuální stránka (<em>currentPage</em>). <br />
  Př:
  <pre>
    var opt = {
      pager: {
        rowsCount: 10,
	currentPage: 3
      }
    };  
  </pre>
  </p>

  <h3>Vizuální efekty dynamické tabulky, zrušení, skrytí, znovuzobrazení toolbaru </h3>
  <p>
  Dynamická tabulka dokáže vytvářet různé vizuální efekty na toolbaru. Jedná se o efekt postupného zobrazení (<em>fadeCreate</em>) a
  zrušení toolbaru (<em>fadeDestroy</em>). Celkové možnosti je nejlépe ukázat na příkladě.<br />
  Př:
  <pre>
    var opt = {
      fadeDestroy: {
        opacity: 90,	// procent
	sensitivity: -1,
	duration: 10	// 1 sekunda
      },
      fadeCreate: {
        opacity: 10,	// procent
	sensitivity: 0.5,
	duration: 30	// 3 sekundy
      }
    };
  </pre>
  Takto nastavená tabulka bude svůj toolbar 3 sekundy s danou sensitivitou postupně zobrazovat 
  počínaje průhledností 10%.
  <br /><br />
  Dále je možné toolbar skrývat, znovuzobrazovat a odstraňovat. Lze to provést např. tímto způsobem:
  <pre>
    &lt;input type="submit" value="destroy toolbar" onclick="DynamicTable.destroy('table1')" /&gt;
    &lt;input type="submit" value="hide toolbar" onclick="DynamicTable.hide('table1')" /&gt;
    &lt;input type="submit" value="show toolbar" onclick="DynamicTable.show('table1')" /&gt;
  </pre>
  K tomuto účelu jsou k dispozici uvedené metody, které jako parametr přebírají id tabulky, nebo
  objekt tabulky samotný.
  </p>

  <h3>Kaskádové styly dynamické tabulky</h3>
  <p>
  Dynamická tabulka umožňuje definovat vlastní styly pro její prvky v externím stylovém předpise.
  Názvy css tříd vypovídají za vše, proto uvádím pouze jejich výpis.
  <table style="border: 1px solid black; font-size: 12px">
  <tr><th align="left">název třídy</th><th>odpovídající HTML element</th></tr>
  <tr><td>dynamic-table-toolbar</td><td align="right">TR</td></tr>
  <tr><td>dynamic-table-filter</td><td align="right">INPUT</td></tr>
  <tr><td>tool-1, tool-2, ..., tool-n</td><td align="right">TH</td></tr>
  <tr><td>dynamic-table-downarrow</td><td align="right">IMG</td></tr>
  <tr><td>dynamic-table-uparrow</td><td align="right">IMG</td></tr>
  <tr><td>dynamic-table-pagerbar</td><td align="right">TD</td></tr>
  <tr><td>dynamic-table-page-selector</td><td align="right">A</td></tr>
  <tr><td>dynamic-table-page-selected</td><td align="right">A</td></tr>
  </table>
  <br />
  Př.: Přiřazení stylu třetímu filtru v pořadí:
  <pre>
    #tabulka1 .dynamic-table-toolbar .tool-3 .dynamic-table-filter {
      width: 50px
    }
  </pre>
  </p>

  <h3>Kompatibilita s prohlížeči</h3>
  <p>
  Dynamická tabulka byla zkoušena a měla by být kompatibilní s těmito prohlížeči: 
  <ul>
    <li>Mozilla/5.0 Gecko/20080311 Iceweasel/2.0.0.13</li>
    <li>IE 6</li>
    <li>Opera/9.27</li>
  </ul>
  <b>Upozornění: Výjimkou jsou pouze vizuální efekty, které fungují pouze v FF.</b>
  </p>

</body>
</html>